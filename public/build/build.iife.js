(function(e){"use strict";const u=(s,t)=>{const n=s.__vccOpts||s;for(const[i,o]of t)n[i]=o;return n},N={class:"codecheck-manifest-files"},w={class:"manifest-files-list"},D=["onUpdate:modelValue"],S=["onUpdate:modelValue"],C=["onClick"],b=u({__name:"CodecheckManifestFiles",props:{name:{type:String,required:!0},label:{type:String,required:!0},description:{type:String,default:""},value:{type:String,default:""},isRequired:{type:Boolean,default:!1}},setup(s){const t=s,n=e.ref([]);e.onMounted(()=>{t.value&&t.value.split(`
`).forEach(c=>{if(c.trim()){const l=c.split(" - ");n.value.push({filename:l[0]||"",comment:l[1]||""})}}),n.value.length===0&&i()});function i(){n.value.push({filename:"",comment:""})}function o(c){n.value.splice(c,1),a()}function a(){var r;const c=n.value.filter(p=>p.filename.trim()).map(p=>p.filename+(p.comment?" - "+p.comment:"")),l=new CustomEvent("update",{detail:c.join(`
`)});(r=document.querySelector(`[data-name="${t.name}"]`))==null||r.dispatchEvent(l)}return(c,l)=>(e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("div",w,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(r,p)=>(e.openBlock(),e.createElementBlock("div",{key:p,class:"manifest-file-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>r.filename=m,type:"text",placeholder:"Filename (e.g., figures/figure1.png)",onInput:a,class:"form-control"},null,40,D),[[e.vModelText,r.filename]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>r.comment=m,type:"text",placeholder:"Comment (e.g., Main result visualization)",onInput:a,class:"form-control"},null,40,S),[[e.vModelText,r.comment]]),e.createElementVNode("button",{type:"button",onClick:m=>o(p),class:"btn-remove"},"Remove",8,C)]))),128))]),e.createElementVNode("button",{type:"button",onClick:i,class:"btn-add"},"+ Add File")]))}},[["__scopeId","data-v-e8d2b036"]]),B={class:"codecheck-repository-list"},M={class:"repository-list"},F=["onUpdate:modelValue"],x=["onClick"],y=u({__name:"CodecheckRepositoryList",props:{name:{type:String,required:!0},label:{type:String,required:!0},description:{type:String,default:""},value:{type:String,default:""}},setup(s){const t=s,n=e.ref([]);e.onMounted(()=>{t.value&&t.value.split(`
`).forEach(c=>{c.trim()&&n.value.push(c.trim())}),n.value.length===0&&i()});function i(){n.value.push("")}function o(c){n.value.splice(c,1),a()}function a(){var r;const c=n.value.filter(p=>p.trim()).join(`
`),l=new CustomEvent("update",{detail:c});(r=document.querySelector(`[data-name="${t.name}"]`))==null||r.dispatchEvent(l)}return(c,l)=>(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("div",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(r,p)=>(e.openBlock(),e.createElementBlock("div",{key:p,class:"repository-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.value[p]=m,type:"text",placeholder:"Repository URL (e.g., https://github.com/username/repo)",onInput:a,class:"form-control"},null,40,F),[[e.vModelText,n.value[p]]]),e.createElementVNode("button",{type:"button",onClick:m=>o(p),class:"btn-remove"},"Remove",8,x)]))),128))]),e.createElementVNode("button",{type:"button",onClick:i,class:"btn-add"},"+ Add Repository")]))}},[["__scopeId","data-v-e9d9bb23"]]),R={class:"codecheck-review-display"},T={key:0,class:"codecheck-info"},I={class:"info-section"},U={key:0,class:"info-section"},L={key:1,class:"info-section"},O={key:2,class:"info-section"},A={key:3,class:"info-section"},q={key:0},z={key:4,class:"info-section"},P={key:0,class:"orcid-badge"},j={key:5,class:"info-section"},Y=["href"],H={key:6,class:"info-section"},K={key:7,class:"info-section"},W={key:8,class:"info-section"},J=["href"],X={class:"actions"},G={key:1,class:"codecheck-not-opted"},Q=u({__name:"CodecheckReviewDisplay",props:{submission:{type:Object,required:!0}},setup(s){const{useLocalize:t}=pkp.modules.useLocalize,{t:n}=t(),i=s,o=e.computed(()=>{if(i.submission.codecheckMetadata){if(typeof i.submission.codecheckMetadata=="string")try{return JSON.parse(i.submission.codecheckMetadata)}catch(h){return console.error("Failed to parse codecheck metadata:",h),{}}return i.submission.codecheckMetadata}return{}}),a=e.computed(()=>Object.keys(o.value).length>0);function c(){return o.value.certificate&&o.value.checkTime?"complete":a.value?"in-progress":"pending"}const l=e.computed(()=>{switch(c()){case"complete":return"status-complete";case"in-progress":return"status-in-progress";case"pending":default:return"status-pending"}});function r(){switch(c()){case"complete":return n("plugins.generic.codecheck.status.complete");case"in-progress":return n("plugins.generic.codecheck.status.inProgress");case"pending":default:return n("plugins.generic.codecheck.status.pending")}}function p(h){return h?new Date(h).toLocaleString():""}function m(){const h=pkp.registry.getPiniaStore("workflow");h.selectedMenuState={primaryMenuItem:"workflow",stageId:999}}return(h,d)=>{var V;const f=e.resolveComponent("pkp-button");return e.openBlock(),e.createElementBlock("div",R,[e.createElementVNode("h3",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.reviewTitle")),1),(V=s.submission)!=null&&V.codecheckOptIn?(e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("div",I,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.status")),1),e.createElementVNode("span",{class:e.normalizeClass(["status-badge",l.value])},e.toDisplayString(r()),3)]),a.value&&o.value.configVersion?(e.openBlock(),e.createElementBlock("div",U,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.review.configVersion")),1),e.createElementVNode("p",null,e.toDisplayString(o.value.configVersion),1)])):e.createCommentVNode("",!0),a.value&&o.value.publicationType?(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.review.publicationType")),1),e.createElementVNode("p",null,e.toDisplayString(o.value.publicationType==="doi"?e.unref(n)("plugins.generic.codecheck.review.publicationType.doi"):e.unref(n)("plugins.generic.codecheck.review.publicationType.separate")),1)])):e.createCommentVNode("",!0),a.value&&o.value.certificate?(e.openBlock(),e.createElementBlock("div",O,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.identifier.label")),1),e.createElementVNode("p",null,e.toDisplayString(o.value.certificate),1)])):e.createCommentVNode("",!0),a.value&&o.value.manifest&&o.value.manifest.length>0?(e.openBlock(),e.createElementBlock("div",A,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.review.manifestFiles")),1),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value.manifest,(g,_)=>(e.openBlock(),e.createElementBlock("li",{key:_},[e.createElementVNode("strong",null,e.toDisplayString(g.file),1),g.comment?(e.openBlock(),e.createElementBlock("span",q," - "+e.toDisplayString(g.comment),1)):e.createCommentVNode("",!0)]))),128))])])):e.createCommentVNode("",!0),a.value&&o.value.codecheckers&&o.value.codecheckers.length>0?(e.openBlock(),e.createElementBlock("div",z,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.review.codecheckers")),1),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value.codecheckers,(g,_)=>(e.openBlock(),e.createElementBlock("li",{key:_},[e.createTextVNode(e.toDisplayString(g.name)+" ",1),g.orcid?(e.openBlock(),e.createElementBlock("span",P,e.toDisplayString(g.orcid),1)):e.createCommentVNode("",!0)]))),128))])])):e.createCommentVNode("",!0),a.value&&o.value.repository?(e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.repositories.title")),1),e.createElementVNode("a",{href:o.value.repository,target:"_blank"},e.toDisplayString(o.value.repository),9,Y)])):e.createCommentVNode("",!0),a.value&&o.value.checkTime?(e.openBlock(),e.createElementBlock("div",H,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.completionTime.label")),1),e.createElementVNode("p",null,e.toDisplayString(p(o.value.checkTime)),1)])):e.createCommentVNode("",!0),a.value&&o.value.summary?(e.openBlock(),e.createElementBlock("div",K,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.certificate.summary")),1),e.createElementVNode("p",null,e.toDisplayString(o.value.summary),1)])):e.createCommentVNode("",!0),a.value&&o.value.reportUrl?(e.openBlock(),e.createElementBlock("div",W,[e.createElementVNode("h4",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.review.reportUrl")),1),e.createElementVNode("a",{href:o.value.reportUrl,target:"_blank"},e.toDisplayString(o.value.reportUrl),9,J)])):e.createCommentVNode("",!0),e.createElementVNode("div",X,[e.createVNode(f,{onClick:m},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(n)("plugins.generic.codecheck.viewFullMetadata")),1)]),_:1})])])):(e.openBlock(),e.createElementBlock("div",G,[e.createElementVNode("p",null,e.toDisplayString(e.unref(n)("plugins.generic.codecheck.notOptedIn")),1)]))])}}},[["__scopeId","data-v-2ac9f582"]]),{useLocalize:Z}=pkp.modules.useLocalize,$={name:"CodecheckMetadataForm",props:{submission:{type:Object,required:!0},canEdit:{type:Boolean,default:!0}},setup(){const{t:s}=Z();return{t:s}},data(){return{loading:!0,saving:!1,dataLoaded:!1,error:null,saveMessage:"",saveMessageType:"",repositories:[],submissionData:{id:null,title:"",authors:[],doi:"",codeRepository:"",dataRepository:"",manifestFiles:"",dataAvailabilityStatement:""},metadata:{version:"latest",publicationType:"doi",manifest:[],repository:"",source:"",codecheckers:[],certificate:"",check_time:"",summary:"",report:"",additionalContent:""}}},computed:{canPreview(){return this.metadata.manifest.length>0&&this.metadata.codecheckers.length>0&&this.metadata.certificate}},mounted(){this.loadData()},methods:{async loadData(){var s,t,n,i,o,a,c,l;this.loading=!0,this.error=null,this.dataLoaded=!1;try{if(!this.submission||!this.submission.id)throw new Error("Invalid submission object");const r=this.submission.id;let p=pkp.context.apiBaseUrl.replace(/\/api\/v1\/?$/,"");p+="/codecheck";const m=`${p}/metadata?submissionId=${r}`,h=await fetch(m,{headers:{"X-Csrf-Token":pkp.currentUser.csrfToken}});if(!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);const d=await h.json();this.submissionData={id:((s=d.submission)==null?void 0:s.id)||r,title:((t=d.submission)==null?void 0:t.title)||"",authors:Array.isArray((n=d.submission)==null?void 0:n.authors)?d.submission.authors:[],doi:((i=d.submission)==null?void 0:i.doi)||"",codeRepository:((o=d.submission)==null?void 0:o.codeRepository)||"",dataRepository:((a=d.submission)==null?void 0:a.dataRepository)||"",manifestFiles:((c=d.submission)==null?void 0:c.manifestFiles)||"",dataAvailabilityStatement:((l=d.submission)==null?void 0:l.dataAvailabilityStatement)||""},d.codecheck&&typeof d.codecheck=="object"&&(this.metadata={version:d.codecheck.version||d.codecheck.version||"latest",publicationType:d.codecheck.publicationType||d.codecheck.publication_type||"doi",manifest:Array.isArray(d.codecheck.manifest)?d.codecheck.manifest:typeof d.codecheck.manifest=="string"?JSON.parse(d.codecheck.manifest):[],repository:d.codecheck.repository||"",source:d.codecheck.source||"",codecheckers:Array.isArray(d.codecheck.codecheckers)?d.codecheck.codecheckers:typeof d.codecheck.codecheckers=="string"?JSON.parse(d.codecheck.codecheckers):[],certificate:d.codecheck.certificate||"",check_time:d.codecheck.check_time||d.codecheck.check_time?this.formatDateTimeLocal(d.codecheck.check_time||d.codecheck.check_time):"",summary:d.codecheck.summary||"",report:d.codecheck.report||d.codecheck.report||"",additionalContent:d.codecheck.additionalContent||d.codecheck.additional_content||""},d.codecheck.repository&&(this.repositories=d.codecheck.repository.split(",").map(f=>f.trim()).filter(f=>f))),this.dataLoaded=!0}catch(r){console.error("Load error:",r),this.error=this.t("plugins.generic.codecheck.loadError")+": "+r.message}finally{this.loading=!1}},triggerFileUpload(){this.$refs.fileInput.click()},handleFileUpload(s){const t=s.target.files;if(!(!t||t.length===0)){for(let n=0;n<t.length;n++)this.metadata.manifest.push({file:t[n].name,size:t[n].size,comment:"",checked:!1});s.target.value=""}},formatFileSize(s){if(s===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,i)).toFixed(2))+" "+n[i]},removeManifestFile(s){confirm(this.t("plugins.generic.codecheck.manifest.removeConfirm"))&&this.metadata.manifest.splice(s,1)},addRepository(){this.repositories.push("")},removeRepository(s){confirm(this.t("plugins.generic.codecheck.repositories.removeConfirm"))&&this.repositories.splice(s,1)},showCodecheckerModal(){this.canUsePkpModal()?this.showPkpCodecheckerModal():this.showFallbackCodecheckerModal()},canUsePkpModal(){return typeof pkp<"u"&&pkp.modules&&pkp.modules.useModal},showPkpCodecheckerModal(){const{useModal:s}=pkp.modules.useModal,{openDialog:t}=s(),n='<div class="modal-form"><div class="modal-field"><label for="checker-name" class="modal-label">'+this.t("plugins.generic.codecheck.codecheckers.enterName")+'</label><input type="text" id="checker-name" class="modal-input" placeholder="'+this.t("plugins.generic.codecheck.codecheckers.enterName")+'" /></div><div class="modal-field"><label for="checker-orcid" class="modal-label">'+this.t("plugins.generic.codecheck.codecheckers.enterOrcid")+'</label><input type="text" id="checker-orcid" class="modal-input" placeholder="0000-0000-0000-0000" /></div></div>';t({title:this.t("plugins.generic.codecheck.codecheckers.addCodechecker"),message:n,actions:[{label:this.t("plugins.generic.codecheck.modal.cancel"),callback:i=>i()},{label:this.t("plugins.generic.codecheck.modal.add"),isPrimary:!0,callback:i=>{const o=document.getElementById("checker-name"),a=document.getElementById("checker-orcid"),c=(o==null?void 0:o.value)||"",l=(a==null?void 0:a.value)||"";c.trim()&&this.metadata.codecheckers.push({name:c.trim(),orcid:l.trim()}),i()}}]})},showFallbackCodecheckerModal(){const s=prompt(this.t("plugins.generic.codecheck.codecheckers.enterName"));if(s&&s.trim()){const t=prompt(this.t("plugins.generic.codecheck.codecheckers.enterOrcid"));this.metadata.codecheckers.push({name:s.trim(),orcid:t?t.trim():""})}},removeCodechecker(s){confirm(this.t("plugins.generic.codecheck.codecheckers.removeConfirm"))&&this.metadata.codecheckers.splice(s,1)},saveIdentifier(){this.metadata.certificate?alert(this.t("plugins.generic.codecheck.identifier.saved",{identifier:this.metadata.certificate})):alert(this.t("plugins.generic.codecheck.identifier.enterFirst"))},reserveIdentifier(){const s=new Date().getFullYear(),t=String(Math.floor(Math.random()*9999)).padStart(4,"0");this.metadata.certificate=`CODECHECK-${s}-${t}`,alert(this.t("plugins.generic.codecheck.identifier.reserved",{identifier:this.metadata.certificate}))},removeIdentifier(){confirm(this.t("plugins.generic.codecheck.identifier.removeConfirm"))&&(this.metadata.certificate="")},async saveMetadata(){if(this.validateForm()){this.saving=!0,this.saveMessage="";try{const s={version:this.metadata.version,publication_type:this.metadata.publicationType,manifest:this.metadata.manifest,repository:this.repositories.join(", "),source:this.metadata.source,codecheckers:this.metadata.codecheckers,certificate:this.metadata.certificate,check_time:this.metadata.check_time,summary:this.metadata.summary,report:this.metadata.report,additional_content:this.metadata.additionalContent};console.log("Saving CODECHECK data:",s);const t=this.submission.id;let n=pkp.context.apiBaseUrl.replace(/\/api\/v1\/?$/,"");n+="/codecheck";const i=`${n}/metadata?submissionId=${t}`;if(!(await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-Csrf-Token":pkp.currentUser.csrfToken},body:JSON.stringify(s)})).ok)throw new Error("Failed to save");this.showMessage(this.t("plugins.generic.codecheck.savedSuccessfully"),"success")}catch(s){console.error("Save error:",s),this.showMessage(this.t("plugins.generic.codecheck.saveFailed"),"error")}finally{this.saving=!1}}},async previewYaml(){try{const s=this.generateYamlContent();this.canUsePkpModal()?this.showYamlModal(s):this.showYamlFallback(s)}catch{this.showMessage(this.t("plugins.generic.codecheck.yamlPreviewFailed"),"error")}},generateYamlContent(){const s=[];return s.push("---"),s.push("version: https://codecheck.org.uk/spec/config/"+this.metadata.version+"/"),this.metadata.source&&s.push('source: "'+this.metadata.source+'"'),s.push("paper:"),s.push('  title: "'+(this.submissionData.title||"Untitled")+'"'),s.push("  authors:"),this.submissionData.authors&&this.submissionData.authors.length>0&&this.submissionData.authors.forEach(t=>{s.push("    - name: "+t.name),t.orcid&&s.push("      ORCID: "+t.orcid)}),this.submissionData.doi&&s.push("  reference: https://doi.org/"+this.submissionData.doi),s.push("manifest:"),this.metadata.manifest&&this.metadata.manifest.length>0&&this.metadata.manifest.forEach(t=>{s.push("  - file: "+t.file),t.comment&&s.push('    comment: "'+t.comment+'"')}),s.push("codechecker:"),this.metadata.codecheckers&&this.metadata.codecheckers.length>0&&this.metadata.codecheckers.forEach(t=>{s.push("  - name: "+t.name),t.orcid&&s.push("    ORCID: "+t.orcid)}),this.metadata.summary&&(s.push("summary: >"),this.metadata.summary.split(`
`).forEach(n=>{s.push("  "+n)})),this.repositories.length>0&&s.push("repository: "+this.repositories[0]),this.metadata.check_time&&s.push('check_time: "'+this.metadata.check_time+'"'),this.metadata.certificate&&s.push("certificate: "+this.metadata.certificate),this.metadata.report&&s.push("report: "+this.metadata.report),this.metadata.additionalContent&&(s.push(""),s.push(this.metadata.additionalContent.trim())),s.join(`
`)},showYamlModal(s){const{useModal:t}=pkp.modules.useModal,{openDialog:n}=t(),i="downloadCodecheckYaml_"+Date.now();window[i]=function(){const a=new Blob([s],{type:"text/yaml"}),c=URL.createObjectURL(a),l=document.createElement("a");l.href=c,l.download="codecheck.yml",l.click(),URL.revokeObjectURL(c)};const o='<div class="yaml-modal-container"><pre class="yaml-preview-content">'+this.escapeHtml(s)+"</pre></div>";n({title:this.t("plugins.generic.codecheck.yaml.previewTitle"),message:o,actions:[{label:this.t("plugins.generic.codecheck.yaml.download"),isPrimary:!0,callback:a=>{window[i](),delete window[i],a()}},{label:this.t("plugins.generic.codecheck.yaml.close"),callback:a=>{delete window[i],a()}}]})},showYamlFallback(s){const t=window.open("","_blank"),n=this.escapeHtml(s),i=JSON.stringify(s),o='<!DOCTYPE html><html><head><title>CODECHECK Metadata Preview</title><style>body { font-family: "Courier New", monospace; padding: 20px; background: #f5f5f5; }.container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }h2 { color: #007ab2; margin-top: 0; }pre { background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 4px; overflow-x: auto; line-height: 1.6; }.actions { margin-top: 20px; display: flex; gap: 10px; }button { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 14px; }.download-btn { background: #007ab2; color: white; }.download-btn:hover { background: #005a87; }.close-btn { background: #dc3545; color: white; }.close-btn:hover { background: #c82333; }</style></head><body><div class="container"><h2>ðŸ“„ CODECHECK Metadata Preview</h2><pre>'+n+"</pre></div><script>function downloadYaml() {  const blob = new Blob(["+i+'], { type: "text/yaml" });  const url = URL.createObjectURL(blob);  const a = document.createElement("a");  a.href = url;  a.download = "codecheck.yml";  a.click();  URL.revokeObjectURL(url);}<\\/script></body></html>';t.document.write(o)},escapeHtml(s){const t=document.createElement("div");return t.textContent=s,t.innerHTML},validateForm(){return this.metadata.manifest.length===0?(this.showMessage(this.t("plugins.generic.codecheck.validation.manifestRequired"),"error"),!1):this.metadata.codecheckers.length===0?(this.showMessage(this.t("plugins.generic.codecheck.validation.codecheckersRequired"),"error"),!1):this.metadata.certificate?this.metadata.summary?!0:(this.showMessage(this.t("plugins.generic.codecheck.validation.summaryRequired"),"error"),!1):(this.showMessage(this.t("plugins.generic.codecheck.validation.certificateRequired"),"error"),!1)},showMessage(s,t){this.saveMessage=s,this.saveMessageType=t,setTimeout(()=>{this.saveMessage=""},5e3)},formatDateTimeLocal(s){const t=new Date(s),n=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0");return n+"-"+i+"-"+o+"T"+a+":"+c}}},v={class:"codecheck-metadata-form"},ee={key:0,class:"loading-state"},te={key:1,class:"error-state"},oe={key:2},ie={class:"codecheck-header"},ce={class:"header-content"},se={class:"version-selector"},ne={class:"version-label"},ae={class:"publication-section"},le={class:"radio-options"},re={class:"radio-option"},de={class:"radio-label"},pe={class:"form-section read-only-section"},me={class:"section-title"},he={class:"readonly-description"},ke={class:"info-grid"},ge={class:"info-item"},fe={class:"info-label"},ue=["title"],ye={class:"info-item"},_e={class:"info-label"},be={class:"info-value"},Ee=["title"],Ve={key:0,class:"orcid-badge"},Ne={key:1},we={key:0,class:"info-item"},De={class:"info-label"},Se={class:"info-value"},Ce=["href"],Be={key:1,class:"info-item"},Me={class:"info-label"},Fe={class:"info-value"},xe=["href"],Re={key:2,class:"info-item"},Te={class:"info-label"},Ie={class:"info-value"},Ue=["href"],Le={key:3,class:"info-item"},Oe={class:"info-label"},Ae={class:"info-value"},qe={class:"manifest-preview"},ze={class:"form-section form-details"},Pe={class:"section-title"},je={class:"section-description"},Ye={class:"field-group"},He={class:"field-header"},Ke={class:"field-label"},We={class:"field-description"},Je={key:0,class:"pkpTable manifest-table"},Xe=["onUpdate:modelValue"],Ge={class:"file-info"},Qe={class:"file-name"},Ze={key:0,class:"file-size"},$e=["onUpdate:modelValue","placeholder"],ve=["onClick"],et={key:1,class:"empty-state"},tt={class:"field-group"},ot={class:"field-header"},it={class:"field-label"},ct={class:"field-description"},st={key:0,class:"repository-list"},nt=["onUpdate:modelValue","placeholder"],at=["onClick"],lt={key:1,class:"empty-state"},rt={class:"field-group"},dt={class:"field-label"},pt={class:"field-description"},mt=["placeholder"],ht={class:"field-group"},kt={class:"field-header"},gt={class:"field-label"},ft={key:0,class:"items-list codecheckers-list"},ut={class:"item-content"},yt={class:"item-name"},_t={key:0,class:"item-orcid"},bt=["onClick"],Et={key:1,class:"empty-state"},Vt={class:"field-group"},Nt={class:"field-label"},wt={class:"field-description"},Dt=["placeholder"],St={class:"field-group"},Ct={class:"field-label"},Bt={class:"field-description"},Mt={class:"field-group"},Ft={class:"field-label"},xt={class:"field-group"},Rt={class:"field-label"},Tt={class:"field-description"},It=["placeholder"],Ut={class:"form-section identifier-section"},Lt={class:"section-title"},Ot={class:"field-group"},At=["placeholder"],qt={class:"identifier-actions"},zt={class:"form-footer"},Pt={class:"footer-actions"},jt=["disabled"],Yt=["disabled"];function Ht(s,t,n,i,o,a){return e.openBlock(),e.createElementBlock("div",v,[o.loading?(e.openBlock(),e.createElementBlock("div",ee,[t[18]||(t[18]=e.createElementVNode("span",{class:"pkpSpinner"},null,-1)),e.createElementVNode("p",null,e.toDisplayString(i.t("common.loading")),1)])):o.error?(e.openBlock(),e.createElementBlock("div",te,[e.createElementVNode("p",null,e.toDisplayString(o.error),1),e.createElementVNode("button",{class:"pkpButton",onClick:t[0]||(t[0]=(...c)=>a.loadData&&a.loadData(...c))},e.toDisplayString(i.t("common.retry")),1)])):o.dataLoaded?(e.openBlock(),e.createElementBlock("div",oe,[e.createElementVNode("div",ie,[e.createElementVNode("div",ce,[e.createElementVNode("div",se,[e.createElementVNode("label",ne,e.toDisplayString(i.t("plugins.generic.codecheck.version")),1),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[1]||(t[1]=c=>o.metadata.version=c),class:"version-select"},[...t[19]||(t[19]=[e.createElementVNode("option",{value:"latest"},"latest",-1),e.createElementVNode("option",{value:"1.0"},"1.0",-1)])],512),[[e.vModelSelect,o.metadata.version]])])])]),e.createElementVNode("div",ae,[e.createElementVNode("div",le,[e.createElementVNode("label",re,[e.withDirectives(e.createElementVNode("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=c=>o.metadata.publicationType=c),value:"doi",name:"publication-type",checked:""},null,512),[[e.vModelRadio,o.metadata.publicationType]]),e.createElementVNode("span",de,e.toDisplayString(i.t("plugins.generic.codecheck.publishWithDOI")),1)])])]),e.createElementVNode("div",pe,[e.createElementVNode("h3",me,e.toDisplayString(i.t("plugins.generic.codecheck.paperMetadata.title")),1),e.createElementVNode("p",he,e.toDisplayString(i.t("plugins.generic.codecheck.paperMetadata.readonlyDescription")),1),e.createElementVNode("div",ke,[e.createElementVNode("div",ge,[e.createElementVNode("label",fe,e.toDisplayString(i.t("common.title"))+":",1),e.createElementVNode("div",{class:"info-value",title:i.t("plugins.generic.codecheck.paperMetadata.fieldReadonly")},e.toDisplayString(o.submissionData.title||i.t("common.notAvailable")),9,ue)]),e.createElementVNode("div",ye,[e.createElementVNode("label",_e,e.toDisplayString(i.t("plugins.generic.codecheck.paperMetadata.authors"))+":",1),e.createElementVNode("div",be,[o.submissionData.authors&&o.submissionData.authors.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(o.submissionData.authors,(c,l)=>(e.openBlock(),e.createElementBlock("div",{key:"author-"+l,class:"author-item",title:i.t("plugins.generic.codecheck.paperMetadata.fieldReadonly")},[e.createTextVNode(e.toDisplayString(c.name||i.t("common.unknown"))+" ",1),c.orcid?(e.openBlock(),e.createElementBlock("span",Ve,e.toDisplayString(c.orcid),1)):e.createCommentVNode("",!0)],8,Ee))),128)):(e.openBlock(),e.createElementBlock("em",Ne,e.toDisplayString(i.t("plugins.generic.codecheck.paperMetadata.noAuthors")),1))])]),o.submissionData.doi?(e.openBlock(),e.createElementBlock("div",we,[e.createElementVNode("label",De,e.toDisplayString(i.t("metadata.property.displayName.doi"))+":",1),e.createElementVNode("div",Se,[e.createElementVNode("a",{href:"https://doi.org/"+o.submissionData.doi,target:"_blank"},e.toDisplayString(o.submissionData.doi),9,Ce)])])):e.createCommentVNode("",!0),o.submissionData.codeRepository?(e.openBlock(),e.createElementBlock("div",Be,[e.createElementVNode("label",Me,e.toDisplayString(i.t("plugins.generic.codecheck.codeRepository"))+":",1),e.createElementVNode("div",Fe,[e.createElementVNode("a",{href:o.submissionData.codeRepository,target:"_blank"},e.toDisplayString(o.submissionData.codeRepository),9,xe)])])):e.createCommentVNode("",!0),o.submissionData.dataRepository?(e.openBlock(),e.createElementBlock("div",Re,[e.createElementVNode("label",Te,e.toDisplayString(i.t("plugins.generic.codecheck.dataRepository"))+":",1),e.createElementVNode("div",Ie,[e.createElementVNode("a",{href:o.submissionData.dataRepository,target:"_blank"},e.toDisplayString(o.submissionData.dataRepository),9,Ue)])])):e.createCommentVNode("",!0),o.submissionData.manifestFiles?(e.openBlock(),e.createElementBlock("div",Le,[e.createElementVNode("label",Oe,e.toDisplayString(i.t("plugins.generic.codecheck.manifestFiles.label"))+":",1),e.createElementVNode("div",Ae,[e.createElementVNode("pre",qe,e.toDisplayString(o.submissionData.manifestFiles),1)])])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",ze,[e.createElementVNode("h3",Pe,e.toDisplayString(i.t("plugins.generic.codecheck.details.title")),1),e.createElementVNode("p",je,e.toDisplayString(i.t("plugins.generic.codecheck.workflow.description")),1),e.createElementVNode("div",Ye,[e.createElementVNode("div",He,[e.createElementVNode("label",Ke,[e.createTextVNode(e.toDisplayString(i.t("plugins.generic.codecheck.manifest.title"))+" ",1),t[20]||(t[20]=e.createElementVNode("span",{class:"required"},"*",-1))]),e.createElementVNode("button",{type:"button",class:"pkpButton btn-add",onClick:t[3]||(t[3]=(...c)=>a.triggerFileUpload&&a.triggerFileUpload(...c))},e.toDisplayString(i.t("plugins.generic.codecheck.manifestFiles.addFile")),1),e.createElementVNode("input",{type:"file",ref:"fileInput",onChange:t[4]||(t[4]=(...c)=>a.handleFileUpload&&a.handleFileUpload(...c)),multiple:"",style:{position:"absolute",left:"-9999px",opacity:"0"},accept:".pdf,.csv,.txt,.yml,.yaml,.json,.zip,.png,.jpg"},null,544)]),e.createElementVNode("p",We,e.toDisplayString(i.t("plugins.generic.codecheck.manifest.subtitle")),1),o.metadata.manifest&&o.metadata.manifest.length>0?(e.openBlock(),e.createElementBlock("table",Je,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[t[21]||(t[21]=e.createElementVNode("th",{width:"20"},null,-1)),e.createElementVNode("th",null,e.toDisplayString(i.t("plugins.generic.codecheck.manifest.outputFile")),1),e.createElementVNode("th",null,e.toDisplayString(i.t("plugins.generic.codecheck.manifest.description")),1),t[22]||(t[22]=e.createElementVNode("th",{width:"80"},null,-1))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.metadata.manifest,(c,l)=>(e.openBlock(),e.createElementBlock("tr",{key:"manifest-"+l,class:"manifest-row"},[e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":r=>c.checked=r,class:"file-checkbox"},null,8,Xe),[[e.vModelCheckbox,c.checked]])]),e.createElementVNode("td",null,[e.createElementVNode("div",Ge,[e.createElementVNode("span",Qe,e.toDisplayString(c.file),1),c.size?(e.openBlock(),e.createElementBlock("span",Ze,"("+e.toDisplayString(a.formatFileSize(c.size))+")",1)):e.createCommentVNode("",!0)])]),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":r=>c.comment=r,class:"pkpFormField__input",placeholder:i.t("plugins.generic.codecheck.manifestFiles.commentPlaceholder")},null,8,$e),[[e.vModelText,c.comment]])]),e.createElementVNode("td",null,[e.createElementVNode("button",{type:"button",class:"pkpButton pkpButton--close",onClick:r=>a.removeManifestFile(l)},"Ã—",8,ve)])]))),128))])])):(e.openBlock(),e.createElementBlock("div",et,e.toDisplayString(i.t("plugins.generic.codecheck.manifest.emptyState")),1))]),e.createElementVNode("div",tt,[e.createElementVNode("div",ot,[e.createElementVNode("label",it,e.toDisplayString(i.t("plugins.generic.codecheck.repositories.title")),1),e.createElementVNode("button",{type:"button",class:"pkpButton btn-add",onClick:t[5]||(t[5]=(...c)=>a.addRepository&&a.addRepository(...c))},e.toDisplayString(i.t("plugins.generic.codecheck.repositories.add")),1)]),e.createElementVNode("p",ct,e.toDisplayString(i.t("plugins.generic.codecheck.repositories.description")),1),o.repositories.length>0?(e.openBlock(),e.createElementBlock("div",st,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.repositories,(c,l)=>(e.openBlock(),e.createElementBlock("div",{key:"repo-"+l,class:"repository-item"},[e.withDirectives(e.createElementVNode("input",{type:"url","onUpdate:modelValue":r=>o.repositories[l]=r,class:"pkpFormField__input",placeholder:i.t("plugins.generic.codecheck.repository.placeholder")},null,8,nt),[[e.vModelText,o.repositories[l]]]),e.createElementVNode("button",{type:"button",class:"pkpButton codecheck-btn pkpButton--close",onClick:r=>a.removeRepository(l)},"Ã—",8,at)]))),128))])):(e.openBlock(),e.createElementBlock("div",lt," No repositories added yet "))]),e.createElementVNode("div",rt,[e.createElementVNode("label",dt,e.toDisplayString(i.t("plugins.generic.codecheck.source.label")),1),e.createElementVNode("p",pt,e.toDisplayString(i.t("plugins.generic.codecheck.source.description")),1),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[6]||(t[6]=c=>o.metadata.source=c),class:"pkpFormField__input pkpFormField__input--textarea full-width",rows:"3",placeholder:i.t("plugins.generic.codecheck.source.placeholder")},null,8,mt),[[e.vModelText,o.metadata.source]])]),e.createElementVNode("div",ht,[e.createElementVNode("div",kt,[e.createElementVNode("label",gt,[e.createTextVNode(e.toDisplayString(i.t("plugins.generic.codecheck.codecheckers.title"))+" ",1),t[23]||(t[23]=e.createElementVNode("span",{class:"required"},"*",-1))]),e.createElementVNode("button",{type:"button",class:"pkpButton btn-add",onClick:t[7]||(t[7]=(...c)=>a.showCodecheckerModal&&a.showCodecheckerModal(...c))},e.toDisplayString(i.t("plugins.generic.codecheck.codecheckers.add")),1)]),o.metadata.codecheckers&&o.metadata.codecheckers.length>0?(e.openBlock(),e.createElementBlock("div",ft,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.metadata.codecheckers,(c,l)=>(e.openBlock(),e.createElementBlock("div",{key:"checker-"+l,class:"list-item"},[e.createElementVNode("div",ut,[e.createElementVNode("div",yt,e.toDisplayString(c.name),1),c.orcid?(e.openBlock(),e.createElementBlock("div",_t,"ORCID: "+e.toDisplayString(c.orcid),1)):e.createCommentVNode("",!0)]),e.createElementVNode("button",{type:"button",class:"pkpButton codecheck-btn pkpButton--close",onClick:r=>a.removeCodechecker(l)},"Ã—",8,bt)]))),128))])):(e.openBlock(),e.createElementBlock("div",Et,e.toDisplayString(i.t("plugins.generic.codecheck.codecheckers.emptyState")),1))]),e.createElementVNode("div",Vt,[e.createElementVNode("label",Nt,[e.createTextVNode(e.toDisplayString(i.t("plugins.generic.codecheck.certificate.summary"))+" ",1),t[24]||(t[24]=e.createElementVNode("span",{class:"required"},"*",-1))]),e.createElementVNode("p",wt,e.toDisplayString(i.t("plugins.generic.codecheck.certificate.summaryDescription")),1),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[8]||(t[8]=c=>o.metadata.summary=c),class:"pkpFormField__input pkpFormField__input--textarea full-width",rows:"6",placeholder:i.t("plugins.generic.codecheck.certificate.summaryPlaceholder")},null,8,Dt),[[e.vModelText,o.metadata.summary]])]),e.createElementVNode("div",St,[e.createElementVNode("label",Ct,e.toDisplayString(i.t("plugins.generic.codecheck.certificate.report")),1),e.createElementVNode("p",Bt,e.toDisplayString(i.t("plugins.generic.codecheck.certificate.reportDescription")),1),e.withDirectives(e.createElementVNode("input",{type:"url","onUpdate:modelValue":t[9]||(t[9]=c=>o.metadata.report=c),class:"pkpFormField__input full-width",placeholder:"https://zenodo.org/record/12345"},null,512),[[e.vModelText,o.metadata.report]])]),e.createElementVNode("div",Mt,[e.createElementVNode("label",Ft,e.toDisplayString(i.t("plugins.generic.codecheck.completionTime.label")),1),e.withDirectives(e.createElementVNode("input",{type:"datetime-local","onUpdate:modelValue":t[10]||(t[10]=c=>o.metadata.check_time=c),class:"pkpFormField__input full-width"},null,512),[[e.vModelText,o.metadata.check_time]])]),e.createElementVNode("div",xt,[e.createElementVNode("label",Rt,e.toDisplayString(i.t("plugins.generic.codecheck.additionalContent.label")),1),e.createElementVNode("p",Tt,e.toDisplayString(i.t("plugins.generic.codecheck.additionalContent.description")),1),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[11]||(t[11]=c=>o.metadata.additionalContent=c),class:"pkpFormField__input pkpFormField__input--textarea full-width",rows:"8",placeholder:i.t("plugins.generic.codecheck.additionalContent.placeholder")},null,8,It),[[e.vModelText,o.metadata.additionalContent]])])]),e.createElementVNode("div",Ut,[e.createElementVNode("h3",Lt,[e.createTextVNode(e.toDisplayString(i.t("plugins.generic.codecheck.identifier.title"))+" ",1),t[25]||(t[25]=e.createElementVNode("span",{class:"required"},"*",-1))]),e.createElementVNode("div",Ot,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=c=>o.metadata.certificate=c),class:"pkpFormField__input full-width",placeholder:i.t("plugins.generic.codecheck.identifier.label")},null,8,At),[[e.vModelText,o.metadata.certificate]])]),e.createElementVNode("div",qt,[e.createElementVNode("button",{type:"button",class:"pkpButton codecheck-btn",onClick:t[13]||(t[13]=(...c)=>a.saveIdentifier&&a.saveIdentifier(...c))},e.toDisplayString(i.t("plugins.generic.codecheck.identifier.save")),1),e.createElementVNode("button",{type:"button",class:"pkpButton codecheck-btn",onClick:t[14]||(t[14]=(...c)=>a.reserveIdentifier&&a.reserveIdentifier(...c))},e.toDisplayString(i.t("plugins.generic.codecheck.identifier.reserve")),1),e.createElementVNode("button",{type:"button",class:"pkpButton codecheck-btn pkpButton--isWarnable",onClick:t[15]||(t[15]=(...c)=>a.removeIdentifier&&a.removeIdentifier(...c))},e.toDisplayString(i.t("plugins.generic.codecheck.identifier.remove")),1)])]),e.createElementVNode("div",zt,[e.createElementVNode("div",Pt,[e.createElementVNode("button",{type:"button",class:"pkpButton codecheck-btn",onClick:t[16]||(t[16]=(...c)=>a.previewYaml&&a.previewYaml(...c)),disabled:!a.canPreview},e.toDisplayString(i.t("plugins.generic.codecheck.previewYaml")),9,jt),e.createElementVNode("button",{type:"button",class:"pkpButton codecheck-btn pkpButton--isPrimary",onClick:t[17]||(t[17]=(...c)=>a.saveMetadata&&a.saveMetadata(...c)),disabled:o.saving},e.toDisplayString(o.saving?i.t("common.saving"):i.t("common.save")),9,Yt)]),o.saveMessage?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["save-message",o.saveMessageType])},e.toDisplayString(o.saveMessage),3)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)])}const Kt=u($,[["render",Ht]]);pkp.registry.registerComponent("CodecheckReviewDisplay",Q),pkp.registry.registerComponent("CodecheckMetadataForm",Kt),pkp.registry.registerComponent("CodecheckManifestFiles",b),pkp.registry.registerComponent("CodecheckRepositoryList",y);const{useLocalize:E}=pkp.modules.useLocalize,{t:k}=E();pkp.registry.storeExtend("workflow",s=>{const t=s.store;t.extender.extendFn("getMenuItems",(n,i)=>{const o=i==null?void 0:i.submission;if((o==null?void 0:o.codecheckOptIn)==!0||(o==null?void 0:o.codecheckOptIn)==1||(o==null?void 0:o.codecheckOptIn)==="1"){const c=[...n],l=c.find(r=>r.key==="workflow");if(l&&l.items){const r={key:"codecheck",label:k("plugins.generic.codecheck.workflow.label"),state:{primaryMenuItem:"workflow",title:k("plugins.generic.codecheck.workflow.title"),stageId:999}},p=l.items.findIndex(m=>{var h;return((h=m.state)==null?void 0:h.stageId)===pkp.const.WORKFLOW_STAGE_ID_EXTERNAL_REVIEW});p>=0?l.items.splice(p+1,0,r):l.items.push(r)}return c}return n}),t.extender.extendFn("getPrimaryItems",(n,i)=>{var a,c,l,r;const o=i==null?void 0:i.submission;return((a=i==null?void 0:i.selectedMenuState)==null?void 0:a.primaryMenuItem)==="workflow"&&((c=i==null?void 0:i.selectedMenuState)==null?void 0:c.stageId)===999?[{component:"CodecheckMetadataForm",props:{submission:o,canEdit:!0}}]:((l=i==null?void 0:i.selectedMenuState)==null?void 0:l.primaryMenuItem)==="workflow"&&((r=i==null?void 0:i.selectedMenuState)==null?void 0:r.stageId)===pkp.const.WORKFLOW_STAGE_ID_EXTERNAL_REVIEW&&(o!=null&&o.codecheckOptIn)?[...n,{component:"CodecheckReviewDisplay",props:{submission:o}}]:n})}),pkp.registry.storeExtend("fileManager_SUBMISSION_FILES",s=>{const t=s.store,n=pkp.registry.getPiniaStore("workflow"),i=n==null?void 0:n.submission;i!=null&&i.codecheckOptIn&&(t.extender.extendFn("getColumns",(o,a)=>{const c=[...o];return c.splice(c.length-1,0,{header:k("plugins.generic.codecheck.codecheckStatus"),component:"CodecheckFileStatus",props:{}}),c}),t.extender.extendFn("getItemActions",(o,a)=>a.file?[...o,{label:k("plugins.generic.codecheck.markAsOutput"),name:"markCodecheckOutput",icon:"CheckCircle",actionFn:({file:c})=>{const{useModal:l}=pkp.modules.useModal,{openDialog:r}=l(),{localize:p}=E();r({title:k("plugins.generic.codecheck.markAsOutputTitle"),message:k("plugins.generic.codecheck.markAsOutputConfirm",{fileName:p(c.name)}),actions:[{label:k("common.yes"),isPrimary:!0,callback:m=>{console.log("Marking file as CODECHECK output:",c),m()}},{label:k("common.no"),callback:m=>{m()}}]})}}]:o))}),window.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{Wt()},1e3)});function Wt(){var i,o,a;const s=(i=document.querySelector('textarea[name="manifestFiles"]'))==null?void 0:i.parentElement;if(s){const c=s.querySelector("textarea"),l=document.createElement("div");s.insertBefore(l,c),c.style.display="none",e.createApp(b,{name:"manifestFiles",label:k("plugins.generic.codecheck.manifestFiles.label"),description:k("plugins.generic.codecheck.manifestFiles.description"),value:c.value,isRequired:!0}).mount(l),l.addEventListener("update",r=>{c.value=r.detail,c.dispatchEvent(new Event("input",{bubbles:!0}))})}const t=(o=document.querySelector('textarea[name="codeRepository"]'))==null?void 0:o.parentElement;if(t){const c=t.querySelector("textarea"),l=document.createElement("div");t.insertBefore(l,c),c.style.display="none",e.createApp(y,{name:"codeRepository",label:k("plugins.generic.codecheck.codeRepository"),description:k("plugins.generic.codecheck.codeRepository.description"),value:c.value}).mount(l),l.addEventListener("update",r=>{c.value=r.detail,c.dispatchEvent(new Event("input",{bubbles:!0}))})}const n=(a=document.querySelector('textarea[name="dataRepository"]'))==null?void 0:a.parentElement;if(n){const c=n.querySelector("textarea"),l=document.createElement("div");n.insertBefore(l,c),c.style.display="none",e.createApp(y,{name:"dataRepository",label:k("plugins.generic.codecheck.dataRepository"),description:k("plugins.generic.codecheck.dataRepository.description"),value:c.value}).mount(l),l.addEventListener("update",r=>{c.value=r.detail,c.dispatchEvent(new Event("input",{bubbles:!0}))})}}const Jt={template:`
    <pkp-table-cell>
      <span class="codecheck-status" :class="statusClass">{{ statusText }}</span>
    </pkp-table-cell>
  `,props:["file"],computed:{statusText(){return this.file.codecheckOutput?k("plugins.generic.codecheck.status.marked"):k("plugins.generic.codecheck.status.notMarked")},statusClass(){return this.file.codecheckOutput?"status-marked":"status-not-marked"}}};pkp.registry.registerComponent("CodecheckFileStatus",Jt),console.log("CODECHECK plugin initialized successfully")})(pkp.modules.vue);
